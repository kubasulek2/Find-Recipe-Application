{"version":3,"sources":["app.js"],"names":["$","request","Map","Object","entries","restriction","filter","ingredient1","ingredient2","ingredient3","createRecipeCard","data","index","castRecipes","hits","length","drawRecipeData","changeRecipe","Math","random","recipe","queryHits","image","console","log","text","label","yield","Image","calories","src","attr","onload","append","ingredients","url","i","one","basicFetch","clearRecipeData","empty","redirect","headers","then","json","catch","resp","err","door","on","handle","async","forEach","value","key","map","set","find","removeClass","val","handleBack","Promise","resolve","setTimeout","animationEnd","toggleClass","openFridge","prev","this","parent","previousElementSibling","id","includes","get"],"mappings":"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","file":"app.js","sourcesContent":["$(() => {\n  let obj = {\n    restriction: '',\n    filter: '',\n    ingredient1: '',\n    ingredient2: '',\n    ingredient3: ''\n  };\n  let request = new Map(Object.entries(obj));\n  const createRequest = () => {\n  };\n  const resetRequest = ()=>{\n    request.forEach((value, key, map) => map.set(key, ''));\n\n    $('.fridge').find('.dropdown-menu .show').removeClass('show');\n    $('.fridge').find('input').val('');\n  };\n\n  const handleSelection = ()=> {\n    \n    $('a.dropdown-item').on('click', function () {\n      $(this).parent().prev().text($(this).text())\n    });\n    \n    $('.fa-times-circle').on('click', function () {\n      $(this).prev().val('');\n\n      request.set('ingredient1', this.previousElementSibling.id.includes('1') ? '' : request.get('ingredient1') );\n      request.set('ingredient2', this.previousElementSibling.id.includes('2') ? '' : request.get('ingredient2') );\n      request.set('ingredient3', this.previousElementSibling.id.includes('3') ? '' : request.get('ingredient3') );\n      console.log(request);\n    })\n  };\n\n\n  const openFridge = ()=>{\n    const door = $('.door');\n    const handle = $('.handle');\n\n    door.on('click', async function () {\n      resetRequest();\n      handle.addClass('open');\n\n      let handleBack = new Promise(resolve =>setTimeout(()=>resolve( handle.removeClass('open') ),300) );\n      let animationEnd = new Promise(resolve =>setTimeout(()=>resolve(),600) );\n\n      await handleBack;\n      await animationEnd;\n\n      door.toggleClass('open');\n    })\n  };\n  const basicFetch = ()=>{\n    const appId = 'fd3ea657';\n    const appKey ='a61ca3c11d3b2ec930779e11cfe06c85';\n\n    fetch(`https://api.edamam.com/search?q=chicken+tomato&app_id=${appId}&app_key=${appKey}&from=0&to=6`,{\n      mode: 'cors',\n      redirect: 'follow',\n      headers: {\n        'Accept-Encoding': 'gzip',\n      }\n    }).then(resp => resp.json())\n      .then(data =>{\n        createRecipeCard(data);\n      })\n      .catch(err => console.log(err))\n\n\n\n  };\n  const createRecipeCard = data => {\n    let index = castRecipes(data.hits.length);\n    drawRecipeData(data, index);\n  };\n\n  const castRecipes = (index) => {\n    return index <= 5 ? 0 : Math.floor(Math.random()*(index - 4))\n  };\n\n  const changeRecipe = (data, index) => {\n    drawRecipeData(data, index);\n\n  };\n\n  const drawRecipeData = (data, index) => {\n    clearRecipeData();\n    console.log(data);\n    let recipe = data.hits[index].recipe;\n    let queryHits = data.hits.length <= 5 ? data.hits.length : 5;\n    let image = new Image();\n    let calories = Math.round(recipe.calories / recipe.yield);\n\n    image.src = recipe.image;\n    image.onload = $('.image')\n      .append(`<img src='${image.src}' class=\"card-img-top mx-auto\" alt=\"recipe image\">`);\n\n    $('.card-title').text(recipe.label);\n    $('.group-info .info-1').text(`Servings: ${recipe.yield}`);\n    $('.group-info .info-2').text(`Cal/Serving: ${calories}`);\n    $('.index').text(`${index}/5`);\n    console.log(recipe.url);\n    $('a.btn').attr('href', recipe.url);\n\n    for(let i = 0; i < recipe.ingredients.length ; i++){\n      $('.card-body .ingredients')\n        .append(`<li>- ${recipe.ingredients[i].text}</li>`)\n    }\n\n    $('.btn-prev').one('click', () => {\n      if (index > 0){\n        index--;\n        changeRecipe(data, index)\n      }else{\n        index = queryHits -1;\n        changeRecipe(data, index)\n      }\n    });\n    $('.btn-next').one('click', () => {\n\n      if (index < queryHits - 1){\n        index++;\n        changeRecipe(data, index)\n      }else{\n        index = 0;\n        changeRecipe(data, index)\n      }\n    });\n  };\n  const clearRecipeData = ()=>{\n    $('ul.ingredients').empty();\n    $('.image').empty();\n  };\n\n  basicFetch();\n  openFridge();\n  handleSelection();\n});"]}